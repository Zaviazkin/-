<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Keyboard events</title>
    <link rel="stylesheet" href="./piano.css" />
  </head>
  <body>
    <div class="img0 music"></div>
    <div class="img1 music"></div>
    <div class="img2 music"></div>
    <div class="img3 music"></div>
    <div class="img4 music"></div>
    <div class="img5 music"></div>
    <div class="electro-piano">
      <div class="key key-65">A</div>
      <div class="key key-83">S</div>
      <div class="key key-68">D</div>
      <div class="key key-70">F</div>
      <div class="key key-71">G</div>
      <div class="key key-72">H</div>
      <div class="key key-74">J</div>
    </div>
    <audio src="./sounds/noty-do.mp3" data-key="65"></audio>
    <audio src="./sounds/re.mp3" data-key="83"></audio>
    <audio src="./sounds/mi.mp3" data-key="68"></audio>
    <audio src="./sounds/fa.mp3" data-key="70"></audio>
    <audio src="./sounds/sol.mp3" data-key="71"></audio>
    <audio src="./sounds/lja.mp3" data-key="72"></audio>
    <audio src="./sounds/si.mp3" data-key="74"></audio>
  </body>
  <script>
    const giby = (selector) => document.querySelector(selector);

    const piano = document.querySelector(".electro-piano");

    document.querySelectorAll(".key").forEach((key) => {
      key.addEventListener("transitionend", (e) => {
        e.target.classList.remove("playing");
        const melodi = document.querySelectorAll(".music").forEach((img) => {
          img.classList.remove("past");
        });
      });
    });

    document.addEventListener("keydown", (e) => {
      const sound = giby(`audio[data-key='${e.keyCode}'`);
      const keybord = giby(`.key-${e.keyCode}`);
      const img = document.querySelectorAll(".music").forEach((img) => {
        img.classList.add("past");
      });
      if (!sound) return;
      keybord.classList.add("playing");
      sound.play();
    });
  </script>
</html>
